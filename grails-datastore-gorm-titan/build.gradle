//version = "2.0.0-SNAPSHOT"
version = "2.0.0-M02"

ext.neo4jVersion = "2.0.3"
ext.gdmVersion = "2.0.7.RELEASE"

sourceSets.main.java.srcDirs = []
sourceSets.main.groovy.srcDirs += ["src/main/java"]

repositories {
    //mavenLocal()
    //mavenCentral()

    // some artifacts used are not available on mavenCentral
    maven { url "http://m2.neo4j.org/content/repositories/releases/" }
//    maven { url "http://m2.neo4j.org/content/repositories/snapshots/" }
//    maven { url "http://repo.grails.org/grails/core" }
}

dependencies {
    compile "org.neo4j:neo4j-community:$neo4jVersion",
        "org.neo4j:neo4j-graphviz:$neo4jVersion",
        'org.codehaus.groovy:groovy-all:2.1.9'

    runtime "org.neo4j:neo4j-jdbc:2.0.2"

    // during development (aka snapshot version), use project dependencies
    // during release, use 'regular' dependencies
    if (version =~ /SNAPSHOT/) {
        compile project(":grails-datastore-gorm"),
                project(":grails-datastore-web"),
                project(":grails-datastore-gorm-plugin-support")
        testCompile project(":grails-datastore-gorm-test"),
                project(":grails-datastore-gorm-tck")
    } else {
        compile "org.grails:grails-datastore-gorm:$gdmVersion",
                "org.grails:grails-datastore-web:$gdmVersion",
                "org.grails:grails-datastore-gorm-plugin-support:$gdmVersion"
        testCompile "org.grails:grails-datastore-gorm-test:$gdmVersion",
                "org.grails:grails-datastore-gorm-tck:$gdmVersion"
    }

    testCompile 'org.codehaus.gpars:gpars:0.12',
            [group: "org.neo4j", name: "neo4j-kernel", version: neo4jVersion, classifier: 'tests'],
            [group: "org.neo4j.app", name: "neo4j-server", version: neo4jVersion, classifier: 'tests'],
            [group: "org.neo4j.app", name: "neo4j-server", version: neo4jVersion],
            "org.neo4j:neo4j-graphviz:$neo4jVersion",
            "org.neo4j:neo4j-management:$neo4jVersion",
            'org.apache.tomcat:tomcat-jdbc:8.0.8',
            'com.sun.jersey:jersey-server:1.9',
            'com.sun.jersey:jersey-core:1.9',
            'com.sun.jersey:jersey-client:1.9',
            'p6spy:p6spy:2.0.2'
    testRuntime "org.grails:grails-web:$grailsVersion", {
        transitive = false
    }
    testRuntime("org.grails:grails-plugin-domain-class:$grailsVersion") {
        exclude group: 'org.grails', module:'grails-plugin-testing'
        exclude group: 'org.grails', module:'grails-datastore-core'
        exclude group: 'org.grails', module:'grails-datastore-gorm'
        exclude group: 'org.grails', module:'grails-datastore-simple'
    }
}

/*
test {
    jvmArgs '-Xmx1024m', '-Xdebug', '-Xnoagent', '-Dgrails.full.stacktrace=true', '-Djava.compiler=NONE',
            '-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005'
}
*/
